version: "3.11"
services:
  flair-for-aigle:
    shm_size: 16g
    build:
      context: .
      dockerfile: .Dockerfile
    env_file:
      - .env
    volumes:
      - type: bind
        source: ${DOCKER_DATA_FOLDER}
        target: ${DATA_FOLDER}
      - type: bind
        source: ${DOCKER_RUN_FOLDER}
        target: ${RUN_FOLDER}
      - type: bind
        source: .
        target: /app/flair-for-aigle
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [ gpu ]